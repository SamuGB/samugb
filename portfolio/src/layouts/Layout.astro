---
import "@fontsource-variable/onest"
import '@fontsource-variable/playfair-display';

import NavBar from "../components/NavBar.astro"

interface Props {
  title: string
  description: string
}

const { description, title } = Astro.props
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>

  <body>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NB1NE1WXRN"></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NB1NE1WXRN');
    </script>
    
    <div class="content">
      <NavBar />
      <slot />
    </div>
  </body>
</html>

<style is:global>
  :root {
    color-scheme: light dark;
  }

  * {
    box-sizing: border-box;
    min-width: 0;
  }
  html {
    font-family: "Onest Variable", system-ui, sans-serif;
    scroll-behavior: smooth;
  }
  h1, .sans {
    font-family: 'Playfair Display Variable', sans-serif;
    position: relative;
  }
  .sans:after{
    content: "";
    position: absolute;
    height: 1px;
    bottom: 7px;
    left: 0;
    right: 0;
    background-color: #2c98f0;
    visibility: hidden;
    -webkit-transform: scaleX(0);
    -moz-transform: scaleX(0);
    -ms-transform: scaleX(0);
    -o-transform: scaleX(0);
    transform: scaleX(0);
    -webkit-transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    -moz-transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    -ms-transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    -o-transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  .sans:hover::after, .sans.active::after {
    visibility: visible;
    -webkit-transform: scaleX(1);
    -moz-transform: scaleX(1);
    -ms-transform: scaleX(1);
    -o-transform: scaleX(1);
    transform: scaleX(1);
  }
  body {
    background: #FFF; /* Fondo claro */
    color: #333; /* Texto oscuro */
    min-height: 100dvh;
    overscroll-behavior: none;
    display: flex;
    position: relative;
  }
  .h1, .h2, .h3, .h4 {
    text-wrap: balance;
  }
  p {
    text-wrap: pretty;
  }
  .content {
    max-width: 100%;
    min-width: 100%;
  }

  .progress-container {
    height: 6px;
    -webkit-box-shadow: none;
    box-shadow: none;
    background: #f2f3f7;
    overflow: visible;
    border-radius: 4px;
    margin-bottom: 20px;
  }

  .progress-bar {
    box-shadow: none;
    font-size: 12px;
    line-height: 1.2;
    color: #000;
    font-weight: 600;
    text-align: right;
    position: relative;
    overflow: visible;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    -ms-border-radius: 8px;
    border-radius: 8px;
    height: 6px;
  }
  .progress-bar::after {
    position: absolute;
    top: -2px;
    right: 0;
    width: 10px;
    height: 10px;
    content: '';
    -webkit-border-radius: 50%;
    -moz-border-radius: 50%;
    -ms-border-radius: 50%;
    border-radius: 50%;
  }
  .progress-bar span {
    position: absolute;
    top: -22px;
    right: 0;
  }
  .form-control {
    display: block;
    width: 100%;
    height: 54px;
    padding: 10px 20px;
    font-size: 14px;
    line-height: 1.42857;
    color: #555555;
    background: #f2f3f7;
    border: transparent;
    border-radius: 4px;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
    -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
    transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
    appearance: none;
  }
  textarea.form-control {
    height: 130px;
  }

  .btn-send-message {
    display: inline-block;
    margin-bottom: 0;
    font-weight: normal;
    text-align: center;
    vertical-align: middle;
    touch-action: manipulation;
    cursor: pointer;
    background-image: none;
    border: 2px solid #2c98f0;
    white-space: nowrap;
    font-size: 14px;
    border-radius: 2px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    font-size: 12px;
    font-weight: 400;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: 0.5s;
    padding: 8px 15px;
    -webkit-appearance: button;
    cursor: pointer;
    text-decoration: none;
    color: #fff;
    background: #44a4f2
  }

  @media (min-width: 768px) { 
    .content {
      max-width: 1170px;
      min-width: unset;
      margin: 0 auto;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  @media (prefers-color-scheme: dark) {
    body {
      background: #0F0F0F;
      color: #f0f0f0;
    }
  }
</style>
<script>
  // ObtÃ©n todos los enlaces del sidebar
  const sidebarLinks = document.querySelectorAll('.sidebar a');

  function highlightActiveLink() {
    const windowHeight = window.innerHeight;
    const middleScreen = windowHeight / 2;
    const scrollPosition = window.scrollY + middleScreen;

    sidebarLinks.forEach(link => {
      const href = link.getAttribute("href");

      if (href) {
        const targetId = href.substring(1);
        const targetElement = document.getElementById(targetId);

        if (targetElement &&
          targetElement.offsetTop <= scrollPosition &&
          targetElement.offsetTop + targetElement.offsetHeight > scrollPosition
        ) {
          sidebarLinks.forEach(otherLink => otherLink.classList.remove("active"));
          link.classList.add("active");
        } else {
          link.classList.remove("active");
        }
      }
      else {
        link.classList.remove("active");
      }
    });
  }

  window.addEventListener("scroll", highlightActiveLink);
  document.addEventListener("DOMContentLoaded", highlightActiveLink);
</script>